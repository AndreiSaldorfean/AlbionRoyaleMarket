{"ast":null,"code":"import { errorPrefix } from \"@tsparticles/engine\";\nimport { replaceImageColor } from \"./Utils.js\";\nimport { drawGif } from \"./GifUtils/Utils.js\";\nconst double = 2,\n  defaultAlpha = 1,\n  sides = 12,\n  defaultRatio = 1;\nexport class ImageDrawer {\n  constructor(engine) {\n    this.loadImageShape = async imageShape => {\n      var _imageShape$replaceCo;\n      if (!this._engine.loadImage) {\n        throw new Error(\"\".concat(errorPrefix, \" image shape not initialized\"));\n      }\n      await this._engine.loadImage({\n        gif: imageShape.gif,\n        name: imageShape.name,\n        replaceColor: (_imageShape$replaceCo = imageShape.replaceColor) !== null && _imageShape$replaceCo !== void 0 ? _imageShape$replaceCo : false,\n        src: imageShape.src\n      });\n    };\n    this._engine = engine;\n  }\n  addImage(image) {\n    if (!this._engine.images) {\n      this._engine.images = [];\n    }\n    this._engine.images.push(image);\n  }\n  draw(data) {\n    const {\n        context,\n        radius,\n        particle,\n        opacity\n      } = data,\n      image = particle.image,\n      element = image === null || image === void 0 ? void 0 : image.element;\n    if (!image) {\n      return;\n    }\n    context.globalAlpha = opacity;\n    if (image.gif && image.gifData) {\n      drawGif(data);\n    } else if (element) {\n      const ratio = image.ratio,\n        pos = {\n          x: -radius,\n          y: -radius\n        },\n        diameter = radius * double;\n      context.drawImage(element, pos.x, pos.y, diameter, diameter / ratio);\n    }\n    context.globalAlpha = defaultAlpha;\n  }\n  getSidesCount() {\n    return sides;\n  }\n  async init(container) {\n    const options = container.actualOptions;\n    if (!options.preload || !this._engine.loadImage) {\n      return;\n    }\n    for (const imageData of options.preload) {\n      await this._engine.loadImage(imageData);\n    }\n  }\n  loadShape(particle) {\n    if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n      return;\n    }\n    if (!this._engine.images) {\n      this._engine.images = [];\n    }\n    const imageData = particle.shapeData;\n    if (!imageData) {\n      return;\n    }\n    const image = this._engine.images.find(t => t.name === imageData.name || t.source === imageData.src);\n    if (!image) {\n      void this.loadImageShape(imageData).then(() => {\n        this.loadShape(particle);\n      });\n    }\n  }\n  particleInit(container, particle) {\n    var _imageData$replaceCol;\n    if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n      return;\n    }\n    if (!this._engine.images) {\n      this._engine.images = [];\n    }\n    const images = this._engine.images,\n      imageData = particle.shapeData;\n    if (!imageData) {\n      return;\n    }\n    const color = particle.getFillColor(),\n      image = images.find(t => t.name === imageData.name || t.source === imageData.src);\n    if (!image) {\n      return;\n    }\n    const replaceColor = (_imageData$replaceCol = imageData.replaceColor) !== null && _imageData$replaceCol !== void 0 ? _imageData$replaceCol : image.replaceColor;\n    if (image.loading) {\n      setTimeout(() => {\n        this.particleInit(container, particle);\n      });\n      return;\n    }\n    void (async (_imageData$fill, _imageData$close) => {\n      let imageRes;\n      if (image.svgData && color) {\n        imageRes = await replaceImageColor(image, imageData, color, particle);\n      } else {\n        var _image$ratio;\n        imageRes = {\n          color,\n          data: image,\n          element: image.element,\n          gif: image.gif,\n          gifData: image.gifData,\n          gifLoopCount: image.gifLoopCount,\n          loaded: true,\n          ratio: imageData.width && imageData.height ? imageData.width / imageData.height : (_image$ratio = image.ratio) !== null && _image$ratio !== void 0 ? _image$ratio : defaultRatio,\n          replaceColor: replaceColor,\n          source: imageData.src\n        };\n      }\n      if (!imageRes.ratio) {\n        imageRes.ratio = 1;\n      }\n      const fill = (_imageData$fill = imageData.fill) !== null && _imageData$fill !== void 0 ? _imageData$fill : particle.shapeFill,\n        close = (_imageData$close = imageData.close) !== null && _imageData$close !== void 0 ? _imageData$close : particle.shapeClose,\n        imageShape = {\n          image: imageRes,\n          fill,\n          close\n        };\n      particle.image = imageShape.image;\n      particle.shapeFill = imageShape.fill;\n      particle.shapeClose = imageShape.close;\n    })();\n  }\n}","map":{"version":3,"names":["errorPrefix","replaceImageColor","drawGif","double","defaultAlpha","sides","defaultRatio","ImageDrawer","constructor","engine","loadImageShape","imageShape","_imageShape$replaceCo","_engine","loadImage","Error","concat","gif","name","replaceColor","src","addImage","image","images","push","draw","data","context","radius","particle","opacity","element","globalAlpha","gifData","ratio","pos","x","y","diameter","drawImage","getSidesCount","init","container","options","actualOptions","preload","imageData","loadShape","shape","shapeData","find","t","source","then","particleInit","_imageData$replaceCol","color","getFillColor","loading","setTimeout","_imageData$fill","_imageData$close","imageRes","svgData","_image$ratio","gifLoopCount","loaded","width","height","fill","shapeFill","close","shapeClose"],"sources":["C:/nginx/html/AlbionRoyaleMarket/albion_royale_market_website/node_modules/@tsparticles/shape-image/browser/ImageDrawer.js"],"sourcesContent":["import { errorPrefix } from \"@tsparticles/engine\";\nimport { replaceImageColor } from \"./Utils.js\";\nimport { drawGif } from \"./GifUtils/Utils.js\";\nconst double = 2, defaultAlpha = 1, sides = 12, defaultRatio = 1;\nexport class ImageDrawer {\n    constructor(engine) {\n        this.loadImageShape = async (imageShape) => {\n            if (!this._engine.loadImage) {\n                throw new Error(`${errorPrefix} image shape not initialized`);\n            }\n            await this._engine.loadImage({\n                gif: imageShape.gif,\n                name: imageShape.name,\n                replaceColor: imageShape.replaceColor ?? false,\n                src: imageShape.src,\n            });\n        };\n        this._engine = engine;\n    }\n    addImage(image) {\n        if (!this._engine.images) {\n            this._engine.images = [];\n        }\n        this._engine.images.push(image);\n    }\n    draw(data) {\n        const { context, radius, particle, opacity } = data, image = particle.image, element = image?.element;\n        if (!image) {\n            return;\n        }\n        context.globalAlpha = opacity;\n        if (image.gif && image.gifData) {\n            drawGif(data);\n        }\n        else if (element) {\n            const ratio = image.ratio, pos = {\n                x: -radius,\n                y: -radius,\n            }, diameter = radius * double;\n            context.drawImage(element, pos.x, pos.y, diameter, diameter / ratio);\n        }\n        context.globalAlpha = defaultAlpha;\n    }\n    getSidesCount() {\n        return sides;\n    }\n    async init(container) {\n        const options = container.actualOptions;\n        if (!options.preload || !this._engine.loadImage) {\n            return;\n        }\n        for (const imageData of options.preload) {\n            await this._engine.loadImage(imageData);\n        }\n    }\n    loadShape(particle) {\n        if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n            return;\n        }\n        if (!this._engine.images) {\n            this._engine.images = [];\n        }\n        const imageData = particle.shapeData;\n        if (!imageData) {\n            return;\n        }\n        const image = this._engine.images.find((t) => t.name === imageData.name || t.source === imageData.src);\n        if (!image) {\n            void this.loadImageShape(imageData).then(() => {\n                this.loadShape(particle);\n            });\n        }\n    }\n    particleInit(container, particle) {\n        if (particle.shape !== \"image\" && particle.shape !== \"images\") {\n            return;\n        }\n        if (!this._engine.images) {\n            this._engine.images = [];\n        }\n        const images = this._engine.images, imageData = particle.shapeData;\n        if (!imageData) {\n            return;\n        }\n        const color = particle.getFillColor(), image = images.find((t) => t.name === imageData.name || t.source === imageData.src);\n        if (!image) {\n            return;\n        }\n        const replaceColor = imageData.replaceColor ?? image.replaceColor;\n        if (image.loading) {\n            setTimeout(() => {\n                this.particleInit(container, particle);\n            });\n            return;\n        }\n        void (async () => {\n            let imageRes;\n            if (image.svgData && color) {\n                imageRes = await replaceImageColor(image, imageData, color, particle);\n            }\n            else {\n                imageRes = {\n                    color,\n                    data: image,\n                    element: image.element,\n                    gif: image.gif,\n                    gifData: image.gifData,\n                    gifLoopCount: image.gifLoopCount,\n                    loaded: true,\n                    ratio: imageData.width && imageData.height\n                        ? imageData.width / imageData.height\n                        : image.ratio ?? defaultRatio,\n                    replaceColor: replaceColor,\n                    source: imageData.src,\n                };\n            }\n            if (!imageRes.ratio) {\n                imageRes.ratio = 1;\n            }\n            const fill = imageData.fill ?? particle.shapeFill, close = imageData.close ?? particle.shapeClose, imageShape = {\n                image: imageRes,\n                fill,\n                close,\n            };\n            particle.image = imageShape.image;\n            particle.shapeFill = imageShape.fill;\n            particle.shapeClose = imageShape.close;\n        })();\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}