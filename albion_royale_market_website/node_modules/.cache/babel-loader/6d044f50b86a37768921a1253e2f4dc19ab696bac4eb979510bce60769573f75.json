{"ast":null,"code":"import{sortJson}from'../scripts/sorter.js';import ItemTableRow from'./ItemTableRow.js';import'../css/ItemTable.css';import{useState,useEffect}from\"react\";import Pagination from'./Pagination.js';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ItemsTable(){const[jsonData,setJsonData]=useState([]);const[items,setItems]=useState(\"\");const[jobject,setJobject]=useState([]);console.log(\"Start\");useEffect(()=>{const fetchData=async()=>{try{const response=await fetch('http://192.168.0.144:3000/final.json');const data=await response.json();setJsonData(data);setItems(JSON.stringify(jsonData));setJobject(JSON.parse(items));// Assuming jobject needs to be the same as jsonData initially\n}catch(error){console.error('Error fetching data:',error);}};// Initial fetch\nfetchData();// Fetch every second\n// const intervalId = setInterval(fetchData, 1000);\n// // Clean up the interval to prevent memory leaks\n// return () => clearInterval(intervalId);\n},[]);console.log(jsonData);console.log(items);console.log(jobject);const[sortBy,setSortBy]=useState('roi');const handleSortChange=e=>{setSortBy(e.target.value);sortJson(jobject,e.target.value);};console.log(jobject);const[currentPage,setCurrentPage]=useState(1);const[recordsPerPage]=useState(10);const indexOfLastRecord=currentPage*recordsPerPage;const indexOfFirstRecord=indexOfLastRecord-recordsPerPage;const currentRecords=jobject.slice(indexOfFirstRecord,indexOfLastRecord);const nPages=Math.ceil(jobject.length/recordsPerPage);console.log(currentRecords);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid position-relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"backgrond\",children:/*#__PURE__*/_jsx(\"div\",{className:\"color\",children:/*#__PURE__*/_jsx(\"div\",{className:\"papyrus-texture\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative d-flex flex-column justify-content-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row w-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col d-flex\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"market-offers me-3\",children:\"Market Offers\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"me-2 sort-by-style\",children:\"Sort By:\"}),/*#__PURE__*/_jsxs(\"select\",{class:\"transparent-inp-field sort-by-inp\",id:\"sort-by\",value:sortBy,onChange:handleSortChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"roi\",children:\"Roi\"}),/*#__PURE__*/_jsx(\"option\",{value:\"profit\",children:\"Profit\"}),/*#__PURE__*/_jsx(\"option\",{value:\"time\",children:\"Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"carrying_capacity\",children:\"Carring Capacity\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"div\",{className:\"scroll\",id:\"albion-scroll\",children:currentRecords.map((element,index)=>(console.log(element.id),/*#__PURE__*/_jsx(ItemTableRow,{id:element.id,ign:element.ign,city_buy:element.city_buy,buy_price:element.buy_price,city_sell:element.city_sell,sell_price:element.sell_price,city_craft:element.city_craft,time:element.time,buy_time_update:element.buy_time_update,sell_time_update:element.sell_time_update,carrying_capacity:element.carrying_capacity,recipe:element.recipe,quality:element.quality,profit:element.profit,roi:element.roi,index:element.index,style:index%2===0?\"even-row-style\":\"odd-row-style\"})))})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row w-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(Pagination,{nPages:nPages,currentPage:currentPage,setCurrentPage:setCurrentPage})})})]})]})});}","map":{"version":3,"names":["sortJson","ItemTableRow","useState","useEffect","Pagination","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ItemsTable","jsonData","setJsonData","items","setItems","jobject","setJobject","console","log","fetchData","response","fetch","data","json","JSON","stringify","parse","error","sortBy","setSortBy","handleSortChange","e","target","value","currentPage","setCurrentPage","recordsPerPage","indexOfLastRecord","indexOfFirstRecord","currentRecords","slice","nPages","Math","ceil","length","children","className","class","id","onChange","map","element","index","ign","city_buy","buy_price","city_sell","sell_price","city_craft","time","buy_time_update","sell_time_update","carrying_capacity","recipe","quality","profit","roi","style"],"sources":["C:/nginx/html/AlbionRoyaleMarket/albion_royale_market_website/src/components/ItemsTable.js"],"sourcesContent":["import {sortJson} from  '../scripts/sorter.js';\r\nimport ItemTableRow from './ItemTableRow.js';\r\nimport '../css/ItemTable.css';\r\nimport { useState, useEffect } from \"react\";\r\nimport Pagination from './Pagination.js';\r\n\r\nexport default function ItemsTable(){\r\n    const [jsonData, setJsonData] = useState([]);\r\n    const [items, setItems] = useState(\"\");\r\n    const [jobject, setJobject] = useState([]);\r\n    console.log(\"Start\")\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await fetch('http://192.168.0.144:3000/final.json');\r\n                const data = await response.json();\r\n                setJsonData(data);\r\n                setItems(JSON.stringify(jsonData));\r\n                setJobject(JSON.parse(items)); // Assuming jobject needs to be the same as jsonData initially\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        };\r\n\r\n        // Initial fetch\r\n        fetchData();\r\n\r\n        // Fetch every second\r\n        // const intervalId = setInterval(fetchData, 1000);\r\n\r\n        // // Clean up the interval to prevent memory leaks\r\n        // return () => clearInterval(intervalId);\r\n    }, []);\r\n    console.log(jsonData);\r\n    console.log(items);\r\n    console.log(jobject);\r\n    const [sortBy, setSortBy] = useState('roi');\r\n    const handleSortChange = (e) => {\r\n        setSortBy(e.target.value);\r\n        sortJson(jobject,e.target.value);\r\n    };\r\n    console.log(jobject);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const [recordsPerPage] = useState(10);\r\n\r\n    const indexOfLastRecord = currentPage * recordsPerPage;\r\n    const indexOfFirstRecord = indexOfLastRecord - recordsPerPage;\r\n    const currentRecords = jobject.slice(indexOfFirstRecord, indexOfLastRecord);\r\n    const nPages = Math.ceil(jobject.length / recordsPerPage)\r\n    console.log(currentRecords);\r\n    return (\r\n        <>\r\n            <div className='container-fluid position-relative'>\r\n                <div className='backgrond'>\r\n                    <div className='color'>\r\n                        <div className='papyrus-texture'/>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className='position-relative d-flex flex-column justify-content-center'>\r\n                    <div className='row w-100'>\r\n                        <div className='col d-flex'>\r\n                            <h2 className='market-offers me-3'>Market Offers</h2>\r\n\r\n                            <div className='d-flex'>\r\n                                <h3 className='me-2 sort-by-style'>Sort By:</h3>    \r\n                                <select class=\"transparent-inp-field sort-by-inp\" id=\"sort-by\" value={sortBy} onChange={handleSortChange}>\r\n                                    <option value=\"roi\">Roi</option>\r\n                                    <option value=\"profit\">Profit</option>\r\n                                    <option value=\"time\">Time</option>\r\n                                    <option value=\"carrying_capacity\">Carring Capacity</option>\r\n                                </select> \r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='row'>\r\n                        <div className='col'>\r\n                            <div className='scroll' id='albion-scroll'>\r\n                                {currentRecords.map((element,index) => (\r\n                                    console.log(element.id),\r\n                                    <ItemTableRow \r\n                                        id={element.id} \r\n                                        ign={element.ign}\r\n                                        city_buy={element.city_buy}\r\n                                        buy_price={element.buy_price}\r\n                                        city_sell={element.city_sell}\r\n                                        sell_price={element.sell_price}\r\n                                        city_craft={element.city_craft}\r\n                                        time={element.time}\r\n                                        buy_time_update={element.buy_time_update}\r\n                                        sell_time_update={element.sell_time_update}\r\n                                        carrying_capacity={element.carrying_capacity}\r\n                                        recipe={element.recipe}\r\n                                        quality={element.quality}\r\n                                        profit={element.profit}\r\n                                        roi={element.roi}\r\n                                        index={element.index}\r\n                                        style={index % 2 === 0 ? \"even-row-style\" : \"odd-row-style\"}\r\n                                    />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className='row w-100'>\r\n                        <div className='col'>\r\n                            <Pagination\r\n                                nPages={nPages}\r\n                                currentPage={currentPage}\r\n                                setCurrentPage={setCurrentPage}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}